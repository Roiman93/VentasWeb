async function seach(){$filter=obtain("filter_proced");const a=new FormData;for(let t in $filter)a.append(t,$filter[t]);try{const t="http://ventasweb.local/api/sh_proced",e=await fetch(t,{method:"POST",body:a});data=await e.json(),displayResult(data)}catch(a){}}async function cargar_categorias(){const a=new FormData;for(let t in $filter)a.append(t,$filter[t]);try{const t="http://ventasweb.local/api/cat_proceds",e=await fetch(t,{method:"POST",body:a});data=await e.json(),data.error?alertify.error(data.error):data.resultado.length>0&&($("#id_categoria").append("<option value='all'> Todos </option>"),$.each(data.resultado,(function(a,t){$("#id_categoria_edit").append("<option value="+t.id+">"+t.Nombre+"</option>"),$("#id_categoria_add").append("<option value="+t.id+">"+t.Nombre+"</option>"),$("#id_categoria").append("<option value="+t.id+">"+t.Nombre+"</option>")})))}catch(a){}}async function updateRecord(a){const t=new FormData;t.append("id",a);try{const a="http://ventasweb.local/api/get_proced",e=await fetch(a,{method:"POST",body:t});data=await e.json(),$("#modal_edit_proced").modal("show"),console.log(data.resultado),obtain("modal_edit_proced",data.resultado)}catch(a){}}async function update(){if(result=validateForm("modal_edit_proced"),0!=result){const a=new FormData;for(let t in result)a.append(t,result[t]);try{const t="http://ventasweb.local/api/proced_up",e=await fetch(t,{method:"POST",body:a});data=await e.json(),!0!==a.rsp?(swal("Registro Actualizado",{icon:"success"}),cleanForm("modal_edit_proced"),$("#modal_edit_proced").modal("hide"),displayResult(data)):(swal("Error",{icon:"warning"}),displayResult(data))}catch(a){}}}async function add(){if(result=validateForm("modal_add_proced"),0!=result){const a=new FormData;for(let t in result)a.append(t,result[t]);try{const t="http://ventasweb.local/api/proced_ad",e=await fetch(t,{method:"POST",body:a});data=await e.json(),!0!==a.rsp?(swal("Registro Almacenado",{icon:"success"}),cleanForm("modal_add_proced"),$("#modal_add_proced").modal("hide"),displayResult(data)):(swal("Error",{icon:"warning"}),displayResult(data))}catch(a){}}}async function deleteCustomer(a){const t=new FormData;t.append("id",a);try{const a="http://ventasweb.local/api/proced_dl",e=await fetch(a,{method:"POST",body:t});data=await e.json(),displayResult(data)}catch(a){}}async function deleteRecord(a){swal({title:"¿Seguro que deseas eliminar el Registro?",text:"No podrás deshacer este paso...",icon:"warning",buttons:!0,dangerMode:!0}).then(t=>{t?deleteCustomer(a):swal("!No se Realizo Ningun Cambio!")})}function displayResult(a){a.error?swal({title:"Error",text:a.error+"",icon:"warning"}).then((function(){})):a.resultado?($("#registros").html(a.resultado),$(".ui.button").popup()):(console.log("no han resultados"),$("#registros").html("-"))}function displayResultfind(a){a.error?swal({title:"Error",text:a.error,icon:"warning"}).then((function(){})):a.resultado?($("#modal_edit").modal("show"),$("#registros").html(a.resultado)):(console.log("no han resultados"),$("#registros").html("-"))}window.addEventListener("load",(function(){seach(),cargar_categorias()})),$("#search").click((function(a){seach()})),$("#add").click((function(a){$("#modal_add_proced").modal("show")})),$("#add_record").click((function(a){add()})),$("#update").click((function(a){update()})),$("#recharge").click((function(a){location.reload(!0)}));var txt_name=document.getElementById("nombre");txt_name.onkeyup=function(a){13==a.keyCode&&seach()};var txt_last_name=document.getElementById("descripcion");txt_last_name.onkeyup=function(a){13==a.keyCode&&seach()};